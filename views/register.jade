//
   Created by Win on 2017/3/3.
extends layout
block body
    body(class="bg-info dker",style="overflow-y:scroll")
        section#content(class="m-t-lg wrapper-md animated fadeInDown")
            div.container.aside-xl
                a(class="navbar-brand block",href="/Music")
                    span.h1.font-bold 一七
                header(class="wrapper text-center")
                    strong 加入一七，一起感受音乐的魅力
                form(data-validate="parsley",data-parsley-validate,action="register",method="POST")
                    div.form-group
                        input(placeholder="账号",class="form-control rounded input-lg text-center no-border",data-parsley-required,name="userAccount",data-parsley-remote,data-parsley-remote-options='{ "type": "POST","dataType":"json"}',data-parsley-remote-validator="checkAccount",data-parsley-pattern-message="账号仅允许包含字母、数字以及下划线",data-parsley-pattern="\\w+")
                    div.form-group
                        input(placeholder="昵称",class="form-control rounded input-lg text-center no-border",data-parsley-required,name="userName")
                    div.form-group
                        input(type="password",placeholder="密码",class="form-control rounded input-lg text-center no-border",data-parsley-required,id="pwd",name="userPassword")
                    div.form-group
                        input(type="password",placeholder="确认密码",class="form-control rounded input-lg text-center no-border",data-parsley-equalto="#pwd",data-parsley-required="true")
                    div.form-group
                        input(type="email",placeholder="email",class="form-control rounded input-lg text-center no-border",data-parsley-required="true",name="userEmail")
                    button(type="submit",class="btn btn-lg btn-warning lt b-white b-2x btn-block btn-rounded")
                        i.icon-arrow-right.pull-right
                        span.m-r-n-lg 注册
                    div.line.line-dashed
                    p.text-muted.text-center
                        small 已有账号？
                    a(href="login",class="btn btn-lg btn-info btn-block btn-rounded") 登录
        footer#footer
            div.text-center.padder.clearfix
                p
                    small!='一七音乐<br/>&copy; 2017'

        script(src="/js/jquery.min.js")
        <!-- Bootstrap -->
        script(src="/js/bootstrap.js")
        <!-- parsley -->
        script(src="/js/parsley.min.js")
        <!-- App -->
        script(src="/js/app.js")
        script(src="/js/slimscroll/jquery.slimscroll.min.js")
        script(src="/js/app.plugin.js")
        script(type="text/javascript",src="/js/jPlayer/jquery.jplayer.min.js")
        script(type="text/javascript",src="/js/jPlayer/add-on/jplayer.playlist.min.js")
        script(type="text/javascript",src="/js/jPlayer/demo.js")
        script.
            window.Parsley.addAsyncValidator('checkAccount', function (xhr) {
                console.log(this.$element); // jQuery Object[ input[name="q"] ]
                return xhr.responseJSON.ret;
            }, 'accountIsExists');